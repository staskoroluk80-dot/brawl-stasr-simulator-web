<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Brawl Stars 2018</title>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:700,900&display=swap" rel="stylesheet">
    <style>
        /* --- –ó–ú–Ü–ù–ù–Ü (–ö–û–õ–¨–û–†–ò) --- */
        :root {
            --bg-blue-dark: #0d4474;
            --bg-blue-light: #1f78b4;
            --gold: #ffc400;
            --white: #ffffff;
            --black: #000000;
            --gray-panel: #2a2a2a;
            --btn-red: #e74c3c;
            --btn-green: #2ecc71;
            --btn-purple: #9b59b6;
            --btn-blue: #3498db;
            --btn-orange: #e67e22;
            --event-purple: #8e44ad;
            --event-green: #2ecc71;
            --locked-gray: #3e3e3e;
            --back-button-color: #5d5d5d;
            --chat-bg: rgba(0,0,0,0.6);
            --chat-input: #444;
        }

        * {
            box-sizing: border-box;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Montserrat', sans-serif;
            background-color: var(--bg-blue-dark);
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            touch-action: manipulation;
        }

        /* –ê–î–ê–ü–¢–ê–¶–Ü–Ø –ü–Ü–î –¢–ï–õ–ï–§–û–ù–ò */
        @media (max-width: 768px) {
            body {
                font-size: 14px;
            }
        }

        @media (max-width: 480px) {
            body {
                font-size: 12px;
            }
        }

        .screen-container {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
            display: none;
            background: linear-gradient(135deg, var(--bg-blue-light), var(--bg-blue-dark) 80%);
        }
        .screen-container.active { display: grid; }
        
        /* ========================= */
        /* –ï–ö–†–ê–ù –í–ò–ë–û–†–£ –ù–Ü–ö–ù–ï–ô–ú–ê */
        /* ========================= */
        #nickname-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            text-align: center;
            background: linear-gradient(135deg, var(--bg-blue-light), var(--bg-blue-dark) 80%);
        }

        .logo-container {
            margin-bottom: 40px;
            text-align: center;
        }

        .logo {
            width: 150px;
            height: 150px;
            background: linear-gradient(45deg, #ffc400, #ff9100);
            border-radius: 25px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.4);
            border: 5px solid white;
        }

        .game-title {
            color: white;
            font-size: 2.5rem;
            font-weight: 900;
            text-shadow: 3px 3px 0 #000;
            margin-bottom: 5px;
            letter-spacing: 2px;
        }

        .game-subtitle {
            color: var(--gold);
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 50px;
        }

        .nickname-form {
            background: rgba(0,0,0,0.6);
            padding: 30px;
            border-radius: 20px;
            border: 3px solid var(--gold);
            width: 90%;
            max-width: 400px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .nickname-label {
            color: white;
            font-size: 1.3rem;
            margin-bottom: 20px;
            display: block;
            font-weight: 700;
        }

        .nickname-input {
            width: 100%;
            padding: 15px;
            font-size: 1.2rem;
            border: 3px solid #3498db;
            border-radius: 10px;
            background: rgba(255,255,255,0.1);
            color: white;
            text-align: center;
            font-weight: 700;
            margin-bottom: 25px;
            outline: none;
        }

        .nickname-input::placeholder {
            color: rgba(255,255,255,0.5);
        }

        .start-btn {
            background: var(--gold);
            color: black;
            border: none;
            padding: 18px 40px;
            font-size: 1.5rem;
            font-weight: 900;
            border-radius: 12px;
            cursor: pointer;
            width: 100%;
            text-transform: uppercase;
            box-shadow: 0 6px 0 #cca300;
            transition: all 0.1s;
            letter-spacing: 1px;
        }

        .start-btn:active {
            box-shadow: 0 2px 0 #cca300;
            transform: translateY(4px);
        }

        .random-nickname {
            color: #3498db;
            background: none;
            border: none;
            padding: 10px;
            margin-top: 15px;
            font-size: 0.9rem;
            cursor: pointer;
            text-decoration: underline;
            font-weight: 700;
        }

        /* –ê–î–ê–ü–¢–ê–¶–Ü–Ø –ù–Ü–ö–ù–ï–ô–ú –ï–ö–†–ê–ù–£ */
        @media (max-width: 768px) {
            .logo {
                width: 120px;
                height: 120px;
                font-size: 50px;
            }
            
            .game-title {
                font-size: 2rem;
            }
            
            .game-subtitle {
                font-size: 1rem;
            }
            
            .nickname-form {
                padding: 20px;
            }
            
            .nickname-input {
                padding: 12px;
                font-size: 1.1rem;
            }
            
            .start-btn {
                padding: 15px 30px;
                font-size: 1.3rem;
            }
        }

        @media (max-width: 480px) {
            .logo {
                width: 100px;
                height: 100px;
                font-size: 40px;
            }
            
            .game-title {
                font-size: 1.8rem;
            }
            
            .game-subtitle {
                font-size: 0.9rem;
                margin-bottom: 30px;
            }
            
            .nickname-form {
                padding: 15px;
            }
        }

        /* ========================= */
        /* –ì–û–õ–û–í–ù–ò–ô –ï–ö–†–ê–ù –ì–†–ò */
        /* ========================= */
        #home-screen {
            grid-template-areas: 
                "header header header"
                "left center right"
                "footer footer footer";
            grid-template-rows: 60px 1fr 150px;
            grid-template-columns: 110px 1fr 200px;
        }

        /* –ê–î–ê–ü–¢–ê–¶–Ü–Ø –ì–û–õ–û–í–ù–û–ì–û –ï–ö–†–ê–ù–£ */
        @media (max-width: 1024px) {
            #home-screen {
                grid-template-columns: 90px 1fr 180px;
                grid-template-rows: 60px 1fr 130px;
            }
        }

        @media (max-width: 768px) {
            #home-screen {
                grid-template-areas: 
                    "header header"
                    "left center"
                    "footer footer";
                grid-template-columns: 80px 1fr;
                grid-template-rows: 60px 1fr 120px;
            }
            
            .right-menu {
                display: none !important;
            }
            
            .center-area {
                margin-right: 10px;
            }
        }

        @media (max-width: 480px) {
            #home-screen {
                grid-template-columns: 70px 1fr;
                grid-template-rows: 50px 1fr 110px;
            }
            
            .left-menu {
                padding-top: 15px;
                gap: 15px;
            }
            
            .btn-box {
                width: 55px;
                height: 50px;
                font-size: 20px;
            }
            
            .menu-btn {
                font-size: 9px;
            }
        }

        .header-common {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 15px;
            background: rgba(0,0,0,0.3);
            border-bottom: 2px solid rgba(255,255,255,0.1);
            color: var(--white);
            height: 60px;
            grid-area: header;
        }

        @media (max-width: 480px) {
            .header-common {
                padding: 0 10px;
                height: 50px;
            }
            
            .username {
                font-size: 16px;
            }
            
            .trophies {
                font-size: 12px;
                padding: 4px 8px;
            }
            
            .currency-pill {
                padding: 3px 8px;
                font-size: 12px;
            }
            
            .icon-img {
                width: 18px;
                height: 18px;
            }
            
            .chat-btn {
                width: 35px;
                height: 35px;
                font-size: 16px;
            }
        }

        .profile-section {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .avatar { 
            width: 40px; 
            height: 40px; 
            background: linear-gradient(45deg, #3498db, #9b59b6);
            border: 2px solid #fff; 
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 16px;
            overflow: hidden;
        }
        
        .avatar-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
        }
        
        .avatar-text {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
        }
        
        .username { 
            font-size: 18px; 
            font-weight: 900; 
            text-shadow: 2px 2px 0 #000; 
            max-width: 150px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        .trophies { 
            background: rgba(0,0,0,0.4); 
            padding: 5px 10px; 
            border-radius: 15px; 
            font-weight: 700; 
            font-size: 13px; 
            white-space: nowrap;
        }

        .currency-section {
            display: flex;
            gap: 10px;
            align-items: center;
        }
        
        .currency-pill {
            background: rgba(0,0,0,0.4);
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 15px;
            padding: 4px 10px;
            display: flex;
            align-items: center;
            font-weight: 700;
            font-size: 14px;
            white-space: nowrap;
        }
        
        .icon-img { 
            width: 20px; 
            height: 20px;
            margin-right: 5px;
            object-fit: contain;
        }
        
        .chat-btn { 
            width: 40px; 
            height: 40px; 
            background: #555; 
            border-radius: 50%; 
            border: 2px solid #fff; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            cursor: pointer; 
            font-size: 18px;
        }

        /* Left Menu */
        .left-menu {
            grid-area: left;
            background: rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            gap: 20px;
            padding-top: 30px;
            align-items: center;
        }
        
        .menu-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--white);
            font-size: 10px;
            font-weight: 800;
            position: relative;
            cursor: pointer;
            transition: transform 0.1s;
            width: 100%;
        }
        
        .btn-box {
            width: 65px; 
            height: 60px;
            border: 3px solid #fff;
            border-radius: 12px;
            margin-bottom: 5px;
            display: flex; 
            justify-content: center; 
            align-items: center;
            font-size: 24px;
            box-shadow: 0 4px 0 rgba(0,0,0,0.5);
            background-size: 60%;
            background-repeat: no-repeat;
            background-position: center;
        }
        
        .color-red { 
            background-color: var(--btn-red); 
            background-image: url('https://cdn-icons-png.flaticon.com/512/188/188918.png');
        }
        
        .color-green { 
            background-color: var(--btn-green); 
            background-image: url('https://cdn-icons-png.flaticon.com/512/1170/1170679.png');
        }
        
        .color-purple { 
            background-color: var(--btn-purple); 
            background-image: url('https://cdn-icons-png.flaticon.com/512/1077/1077114.png');
        }
        
        .notification {
            position: absolute; 
            top: -5px; 
            right: 5px;
            background: var(--btn-red); 
            color: white;
            border: 2px solid white; 
            border-radius: 50%;
            width: 20px; 
            height: 20px;
            display: flex; 
            justify-content: center; 
            align-items: center;
            font-size: 11px; 
            z-index: 2;
        }

        /* Center (Character) */
        .center-area {
            grid-area: center;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(0,0,0,0) 70%);
        }
        
        @media (max-width: 768px) {
            .center-area {
                padding: 10px;
            }
        }
        
        .brawler-display {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .rank-info {
            position: absolute;
            top: -40px; 
            background: rgba(0,0,0,0.6);
            border: 2px solid var(--gold);
            color: var(--gold);
            padding: 5px 15px;
            border-radius: 10px;
            font-weight: 900;
            font-size: 13px;
            text-transform: uppercase;
            text-shadow: 1px 1px 0 #000;
            z-index: 2;
            white-space: nowrap;
        }
        
        @media (max-width: 480px) {
            .rank-info {
                font-size: 11px;
                padding: 4px 10px;
                top: -30px;
            }
        }
        
        .character-img {
            height: 350px; 
            width: auto;
            filter: drop-shadow(0 10px 15px rgba(0,0,0,0.6));
            z-index: 1;
            max-width: 100%;
            object-fit: contain;
        }
        
        @media (max-width: 768px) {
            .character-img {
                height: 280px;
            }
        }
        
        @media (max-width: 480px) {
            .character-img {
                height: 220px;
            }
        }
        
        .plus-btn {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 50px; 
            height: 50px;
            border: 3px solid #fff;
            border-radius: 15px;
            background: rgba(0,0,0,0.2);
            color: white;
            font-size: 35px;
            display: flex; 
            justify-content: center; 
            align-items: center;
            cursor: pointer;
        }
        
        @media (max-width: 768px) {
            .plus-btn {
                width: 40px;
                height: 40px;
                font-size: 28px;
            }
        }
        
        .pos-left { left: 10%; }
        .pos-right { right: 10%; }
        
        @media (max-width: 768px) {
            .pos-left { left: 5%; }
            .pos-right { right: 5%; }
        }

        /* Right Menu */
        .right-menu {
            grid-area: right;
            background: rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            gap: 15px;
            padding-top: 30px;
            align-items: center;
            position: relative;
        }
        
        .small-btn { 
            width: 45px; 
            height: 45px; 
            background: linear-gradient(45deg, #555, #777);
            border: 2px solid #fff; 
            border-radius: 8px; 
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            background-size: 60%;
            background-repeat: no-repeat;
            background-position: center;
        }
        
        .small-btn:nth-child(1) {
            background-image: url('https://cdn-icons-png.flaticon.com/512/709/709612.png');
        }
        
        .small-btn:nth-child(2) {
            background-image: url('https://cdn-icons-png.flaticon.com/512/1828/1828884.png');
        }
        
        .small-btn:nth-child(3) {
            background-image: url('https://cdn-icons-png.flaticon.com/512/1665/1665578.png');
        }
        
        .action-btn {
            width: 85%;
            padding: 12px 0;
            text-align: center;
            color: white;
            font-weight: 900;
            font-size: 12px;
            text-transform: uppercase;
            border: 2px solid rgba(255,255,255,0.5);
            border-radius: 6px;
            cursor: pointer;
            box-shadow: 0 4px 0 rgba(0,0,0,0.4);
            line-height: 1.2;
        }
        
        .bg-blue { background-color: var(--btn-blue); }
        .bg-orange { background-color: var(--btn-orange); }
        
        /* –°–æ—Ü—ñ–∞–ª—å–Ω–∞ –ø–∞–Ω–µ–ª—å */
        #social-panel {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            width: 100%;
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 10px;
            display: none;
            flex-direction: column;
            gap: 10px;
            z-index: 20;
            overflow-y: auto;
        }
        
        #social-panel.active { display: flex; }
        
        @media (max-width: 480px) {
            #social-panel {
                padding: 8px;
            }
        }

        .panel-header {
            font-size: 16px;
            font-weight: 900;
            text-transform: uppercase;
            border-bottom: 2px solid #555;
            padding-bottom: 5px;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .close-panel-btn {
            background: var(--btn-red);
            border: none;
            color: white;
            padding: 3px 8px;
            font-weight: 900;
            cursor: pointer;
            border-radius: 3px;
            font-size: 14px;
            min-width: 30px;
            height: 30px;
        }

        #player-list {
            list-style: none;
            padding: 0;
            margin: 0;
            flex-grow: 1;
            overflow-y: auto;
        }
        
        #player-list li {
            background: var(--gray-panel);
            margin-bottom: 5px;
            padding: 8px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 12px;
            font-weight: 700;
        }
        
        #player-list button {
            background: var(--btn-green);
            color: white;
            border: none;
            padding: 5px 8px;
            border-radius: 3px;
            font-size: 11px;
            cursor: pointer;
            white-space: nowrap;
        }

        /* Footer */
        .footer {
            grid-area: footer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 15px 10px 15px;
            background: rgba(0,0,0,0.2);
            position: relative;
            gap: 10px;
        }
        
        @media (max-width: 768px) {
            .footer {
                padding: 0 10px 10px 10px;
                flex-wrap: wrap;
            }
            
            .play-area {
                order: 1;
                width: 100%;
                justify-content: space-between;
                margin-top: 10px;
            }
            
            .boxes-wrapper {
                order: 2;
                margin-top: 10px;
            }
        }
        
        @media (max-width: 480px) {
            .footer {
                padding: 0 8px 8px 8px;
            }
            
            .event-slot {
                width: 200px;
                height: 60px;
                padding: 5px 10px;
            }
            
            .mode-name {
                font-size: 14px;
            }
            
            .map-name {
                font-size: 10px;
            }
            
            .timer-text {
                font-size: 9px;
            }
            
            .btn-play {
                padding: 12px 25px;
                font-size: 20px;
            }
            
            .ticket-count {
                font-size: 10px;
            }
        }

        .boxes-wrapper {
            display: flex;
            gap: 10px;
        }
        
        .box-item {
            position: relative;
            width: 90px;
            height: 90px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: center;
            border-radius: 8px;
            border: 2px solid transparent; 
        }
        
        @media (max-width: 480px) {
            .box-item {
                width: 75px;
                height: 75px;
            }
        }
        
        .box-blue { 
            border-color: #8e44ad; 
            background: linear-gradient(45deg, #9b59b6, #8e44ad);
        }
        
        .box-green { 
            border-color: #2ecc71; 
            background: linear-gradient(45deg, #2ecc71, #27ae60);
        }
        
        .box-pic {
            width: 85%;
            height: auto;
            margin-bottom: 5px;
            filter: drop-shadow(0 5px 5px rgba(0,0,0,0.5));
            object-fit: contain;
        }
        
        .box-counter {
            position: absolute;
            bottom: 5px;
            right: 5px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 10px;
            font-weight: 700;
        }
        
        .play-area {
            display: flex;
            gap: 15px;
            align-items: center;
            margin-left: auto;
        }
        
        .event-slot {
            width: 250px;
            height: 70px;
            background: linear-gradient(to bottom, #2a2a2a, #1a1a1a);
            border: 2px solid #9b59b6;
            border-radius: 8px;
            padding: 5px 12px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            cursor: pointer;
            transition: transform 0.1s;
        }
        
        .timer-text { 
            color: var(--gold); 
            font-size: 10px; 
            text-transform: uppercase; 
            margin-bottom: 2px; 
        }
        
        .mode-name { 
            color: white; 
            font-weight: 900; 
            font-size: 16px; 
            text-transform: uppercase; 
            display: flex; 
            align-items: center; 
            gap: 6px; 
        }
        
        .map-name { 
            color: #aaa; 
            font-size: 11px; 
            font-weight: 700; 
        }
        
        .info-icon { 
            position: absolute; 
            top: 5px; 
            right: 5px; 
            color: #3498db; 
            font-weight: bold; 
            font-family: serif; 
            font-style: italic; 
            border: 2px solid #3498db; 
            border-radius: 50%; 
            width: 18px; 
            height: 18px; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            font-size: 11px;
        }
        
        .play-wrapper {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 5px;
        }
        
        .ticket-count { 
            color: white; 
            font-size: 11px; 
            font-weight: 700; 
            text-shadow: 1px 1px 0 #000; 
            white-space: nowrap;
        }
        
        .btn-play {
            background-color: var(--gold);
            color: black;
            border: none;
            border-radius: 10px;
            padding: 14px 30px;
            font-size: 24px;
            font-weight: 900;
            text-transform: uppercase;
            box-shadow: 0 6px 0 #cca300;
            cursor: pointer;
            transition: all 0.1s;
            white-space: nowrap;
        }
        
        .btn-play:active {
            box-shadow: 0 2px 0 #cca300;
            transform: translateY(4px);
        }

        /* –ß–ê–¢ */
        #chat-window {
            position: absolute;
            bottom: 120px;
            left: 15px;
            width: 300px;
            height: 180px;
            background: var(--chat-bg);
            border: 2px solid #333;
            border-radius: 10px;
            padding: 8px;
            display: none;
            flex-direction: column;
            z-index: 10;
            backdrop-filter: blur(5px);
        }
        
        @media (max-width: 768px) {
            #chat-window {
                width: 250px;
                height: 160px;
                left: 10px;
                bottom: 110px;
            }
        }
        
        @media (max-width: 480px) {
            #chat-window {
                width: calc(100% - 20px);
                left: 10px;
                right: 10px;
                height: 140px;
                bottom: 100px;
            }
        }
        
        #chat-window.active { display: flex; }

        #chat-messages {
            flex-grow: 1;
            overflow-y: auto;
            color: white;
            font-size: 11px;
            margin-bottom: 8px;
            display: flex;
            flex-direction: column;
            gap: 3px;
            padding-right: 5px;
        }
        
        #chat-messages::-webkit-scrollbar {
            width: 4px;
        }
        
        #chat-messages::-webkit-scrollbar-track {
            background: rgba(255,255,255,0.1);
            border-radius: 2px;
        }
        
        #chat-messages::-webkit-scrollbar-thumb {
            background: var(--gold);
            border-radius: 2px;
        }
        
        #chat-input-wrapper {
            display: flex;
            gap: 5px;
        }
        
        #chat-input {
            flex-grow: 1;
            padding: 6px;
            border: none;
            border-radius: 5px;
            background: var(--chat-input);
            color: white;
            font-size: 12px;
            min-height: 36px;
        }
        
        #chat-send-btn {
            background: var(--btn-blue);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 5px;
            font-weight: 700;
            cursor: pointer;
            font-size: 12px;
            min-width: 60px;
        }

        /* –ï–ö–†–ê–ù –†–ï–ñ–ò–ú–Ü–í */
        #events-screen {
            grid-template-rows: 70px 1fr;
            grid-template-columns: 1fr;
            grid-template-areas: 
                "top"
                "grid";
            overflow-y: auto;
        }
        
        @media (max-width: 768px) {
            #events-screen {
                grid-template-rows: 60px 1fr;
            }
        }

        .events-header {
            grid-area: top;
            display: flex;
            align-items: center;
            padding: 0 15px;
            background: rgba(0,0,0,0.4);
            border-bottom: 2px solid rgba(255,255,255,0.1);
            gap: 10px;
        }
        
        @media (max-width: 480px) {
            .events-header {
                padding: 0 10px;
            }
            
            .back-btn {
                padding: 6px 12px;
                font-size: 12px;
                margin-right: 10px;
            }
            
            .events-title {
                font-size: 18px;
            }
        }

        .back-btn {
            background: var(--back-button-color);
            color: white;
            border: 2px solid #fff;
            padding: 8px 20px;
            font-weight: 900;
            cursor: pointer;
            border-radius: 5px;
            box-shadow: 0 4px 0 #333;
            text-transform: uppercase;
            text-decoration: none; 
            white-space: nowrap;
            min-height: 40px;
        }
        
        .back-btn:active { 
            box-shadow: 0 0 0 #333; 
            transform: translateY(4px); 
        }
        
        .events-title {
            color: #fff;
            font-size: 20px;
            font-weight: 900;
            text-transform: uppercase;
            text-shadow: 2px 2px 0 #000;
            flex-grow: 1; 
            text-align: center;
        }

        /* Events Grid */
        .events-grid {
            grid-area: grid;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            padding: 15px;
            overflow-y: auto;
        }
        
        @media (max-width: 480px) {
            .events-grid {
                grid-template-columns: 1fr;
                padding: 10px;
                gap: 10px;
            }
        }

        .event-card {
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
            box-shadow: 0 6px 0 rgba(0,0,0,0.5);
            border: 2px solid rgba(0,0,0,0.2);
            cursor: pointer;
            color: var(--white);
            min-height: 180px;
        }
        
        .card-purple { background: var(--event-purple); }
        .card-green { background: var(--event-green); }
        .card-locked { 
            background: var(--locked-gray); 
            border: 3px solid #555;
            justify-content: center; 
            align-items: center; 
            text-align: center;
            opacity: 0.9;
            padding: 20px;
        }

        .card-header {
            padding: 10px 12px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }
        
        .mode-info h3 { 
            margin: 0; 
            font-size: 18px; 
            color: #fff; 
            text-transform: uppercase; 
            text-shadow: 1px 1px 0 #000; 
        }
        
        .mode-info span { 
            color: var(--gold); 
            font-size: 10px; 
            font-weight: 700; 
            display: block;
            margin-bottom: 3px;
        }
        
        .info-i { 
            width: 22px; 
            height: 22px; 
            border: 2px solid #fff; 
            border-radius: 50%; 
            color: #fff; 
            font-weight: 900; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            font-size: 11px;
            flex-shrink: 0;
        }

        .card-map {
            padding: 0 12px;
            color: #fff;
            font-weight: 700;
            font-size: 12px;
            margin-bottom: 5px;
        }

        .card-bg-image {
            flex-grow: 1;
            background-color: rgba(0,0,0,0.3);
            display: flex;
            justify-content: center;
            align-items: center;
            color: rgba(255,255,255,0.5);
            font-size: 50px;
            min-height: 80px;
            padding: 10px;
        }
        
        .card-bg-image img {
            width: 60px;
            height: 60px;
            opacity: 0.5;
            object-fit: contain;
        }

        .lock-icon { 
            font-size: 35px; 
            margin-bottom: 8px; 
        }
        
        .locked-title { 
            font-size: 18px; 
            font-weight: 900; 
            color: #fff; 
            margin: 0 0 8px 0; 
            text-transform: uppercase; 
        }
        
        .locked-desc { 
            font-size: 12px; 
            max-width: 90%; 
            line-height: 1.3;
        }
        
        .highlight { 
            color: #3498db; 
            font-weight: 900; 
        }
        
        /* –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö */
        .mobile-notification {
            display: none;
            position: fixed;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: var(--btn-red);
            color: white;
            padding: 10px 15px;
            border-radius: 8px;
            font-weight: 700;
            z-index: 1000;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            text-align: center;
            max-width: 90%;
        }
        
        @media (max-width: 768px) {
            .mobile-notification {
                display: block;
            }
        }
        
        /* –ó–∞–±–æ—Ä–æ–Ω–∏—Ç–∏ –≤–∏–±—ñ—Ä —Ç–µ–∫—Å—Ç—É –Ω–∞ –º–æ–±—ñ–ª—å–Ω–∏—Ö */
        @media (max-width: 768px) {
            * {
                -webkit-user-select: none;
                -moz-user-select: none;
                -ms-user-select: none;
                user-select: none;
            }
            
            input, textarea {
                -webkit-user-select: text;
                -moz-user-select: text;
                -ms-user-select: text;
                user-select: text;
            }
        }
        
        /* –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –¥–ª—è —Ç–∞—á-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É */
        @media (hover: none) and (pointer: coarse) {
            button, .btn-play, .back-btn, .action-btn, .menu-btn, .event-slot {
                min-height: 44px;
                min-width: 44px;
            }
            
            .chat-btn, .small-btn, .btn-box {
                min-height: 44px;
                min-width: 44px;
            }
            
            #chat-input {
                min-height: 44px;
            }
        }
    </style>
</head>
<body>
    <!-- –ï–ö–†–ê–ù –í–ò–ë–û–†–£ –ù–Ü–ö–ù–ï–ô–ú–ê -->
    <div id="nickname-screen" class="screen-container active">
        <div class="logo-container">
            <div class="logo">üéÆ</div>
            <h1 class="game-title">BRAWL STARS</h1>
            <p class="game-subtitle">2018 Multiplayer Edition</p>
        </div>
        
        <div class="nickname-form">
            <label class="nickname-label">–í–í–ï–î–Ü–¢–¨ –í–ê–® –ù–Ü–ö–ù–ï–ô–ú:</label>
            <input type="text" id="nickname-input" class="nickname-input" 
                   placeholder="–ù–∞–ø—Ä–∏–∫–ª–∞–¥: ProPlayer" maxlength="15"
                   value="TapGameplay">
            <button id="start-game-btn" class="start-btn">–ü–û–ß–ê–¢–ò –ì–†–£</button>
            <button id="random-nickname-btn" class="random-nickname">üé≤ –í–∏–ø–∞–¥–∫–æ–≤–∏–π –Ω—ñ–∫</button>
        </div>
    </div>

    <!-- –ì–û–õ–û–í–ù–ò–ô –ï–ö–†–ê–ù –ì–†–ò -->
    <div id="home-screen" class="screen-container">
        <header class="header-common">
            <div class="profile-section">
                <div class="avatar">
                    <div class="avatar-text" id="avatar-text">TP</div>
                </div>
                <div class="username" id="display-username">TapGameplay</div>
                <div class="trophies">üèÜ 0</div>
            </div>
            
            <div class="currency-section">
                <div class="currency-pill">
                    <img src="https://cdn-icons-png.flaticon.com/512/2582/2582635.png" alt="Coins" class="icon-img"> 100
                </div>
                <div class="currency-pill">
                    <img src="https://cdn-icons-png.flaticon.com/512/2582/2582675.png" alt="Gems" class="icon-img"> 0
                </div>
                <div class="chat-btn" onclick="toggleChat()">üí¨</div>
            </div>
        </header>

        <nav class="left-menu">
            <a href="#" class="menu-btn">
                <div class="btn-box color-red"></div>
                <div class="notification">1</div>
                BRAWLERS
            </a>
            
            <a href="#" class="menu-btn"> 
                <div class="btn-box color-green"></div>
                <div class="notification">1</div>
                SHOP
            </a>
            
            <a href="#" class="menu-btn" onclick="toggleSocialPanel()">
                <div class="btn-box color-purple"></div>
                SOCIAL
            </a>
        </nav>

        <section class="center-area">
            <div class="plus-btn pos-left">+</div>
            <div class="plus-btn pos-right">+</div>

            <div class="brawler-display">
                <div class="rank-info">Rank 1 &nbsp;|&nbsp; Power 1</div>
                <img src="https://static.wikia.nocookie.net/brawlstars/images/2/28/Lou_Portrait.png" alt="Lou" class="character-img"> 
            </div>
        </section>

        <aside class="right-menu">
            <div id="social-panel">
                <div class="panel-header">
                    ONLINE PLAYERS
                    <button class="close-panel-btn" onclick="toggleSocialPanel()">X</button>
                </div>
                <ul id="player-list">
                    <li>–ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞...</li>
                </ul>
            </div>
            
            <div class="small-btn"></div>
            <div class="small-btn"></div>
            <div class="small-btn"></div>

            <div class="action-btn bg-blue">Friendly<br>Game</div>
            <div class="action-btn bg-orange">Create</div>
        </aside>

        <footer class="footer">
            <div id="chat-window">
                <div id="chat-messages">
                    <div>[SERVER]: –í–≤–µ–¥—ñ—Ç—å –Ω—ñ–∫–Ω–µ–π–º –¥–ª—è –ø–æ—á–∞—Ç–∫—É –≥—Ä–∏</div>
                </div>
                <div id="chat-input-wrapper">
                    <input type="text" id="chat-input" placeholder="–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è..." 
                           onkeypress="if(event.key === 'Enter') sendChatMessage()">
                    <button id="chat-send-btn" onclick="sendChatMessage()">Send</button>
                </div>
            </div>

            <div class="boxes-wrapper">
                <div class="box-item box-green">
                    <img src="https://static.wikia.nocookie.net/brawlstars/images/a/a0/Super_Brawl_Box.png" 
                         alt="Big Box" class="box-pic">
                    <div class="box-counter">0/100</div>
                </div>
                <div class="box-item box-blue">
                    <img src="https://static.wikia.nocookie.net/brawlstars/images/d/d3/Brawl_Box.png" 
                         alt="Box" class="box-pic">
                    <div class="box-counter">0/10</div>
                </div>
            </div>

            <div class="play-area">
                <div class="event-slot" onclick="showScreen('events-screen')">
                    <div class="info-icon">i</div>
                    <div class="timer-text">New Event in: 23h 50m</div>
                    <div class="mode-name">
                        <span style="color:#d000ff;">üíé</span> GEM GRAB
                    </div>
                    <div class="map-name">Flooded Mine</div>
                </div>

                <div class="play-wrapper">
                    <div class="ticket-count">üéüÔ∏è 100/100</div>
                    <button class="btn-play">Play</button>
                </div>
            </div>
        </footer>
        
        <!-- –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö -->
        <div class="mobile-notification" id="mobile-notification">
            üëÜ –ù–∞—Ç–∏—Å–∫–∞–π—Ç–µ –Ω–∞ –µ–ª–µ–º–µ–Ω—Ç–∏ –¥–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó
        </div>
    </div>

    <!-- –ï–ö–†–ê–ù –†–ï–ñ–ò–ú–Ü–í -->
    <div id="events-screen" class="screen-container">
        <div class="events-header">
            <button class="back-btn" onclick="showScreen('home-screen')">–ù–ê–ó–ê–î</button>
            <div class="events-title">CHOOSE EVENT</div>
            
            <div class="currency-section">
                <div class="currency-pill">
                    <img src="https://cdn-icons-png.flaticon.com/512/2582/2582635.png" alt="Coins" class="icon-img"> 156
                </div>
                <div class="currency-pill">
                    <img src="https://cdn-icons-png.flaticon.com/512/2582/2582675.png" alt="Gems" class="icon-img"> 0
                </div>
                <div class="chat-btn" onclick="toggleChat()">üí¨</div>
            </div>
        </div>

        <div class="events-grid">
            <div class="event-card card-purple">
                <div class="card-header">
                    <div class="mode-info">
                        <span>New Event in: 23h 37m</span>
                        <h3>üíé GEM GRAB</h3>
                    </div>
                    <div class="info-i">i</div>
                </div>
                <div class="card-map">Flooded Mine</div>
                <div class="card-bg-image">
                    <img src="https://static.wikia.nocookie.net/brawlstars/images/6/63/Gem_Grab.png" alt="Gem Grab">
                </div>
            </div>

            <div class="event-card card-green">
                <div class="card-header">
                    <div class="mode-info">
                        <span>New Event in: 11h 37m</span>
                        <h3>üíÄ SHOWDOWN</h3>
                    </div>
                    <div class="info-i">i</div>
                </div>
                <div class="card-map">Skull Creek</div>
                <div class="card-bg-image">
                    <img src="https://static.wikia.nocookie.net/brawlstars/images/e/ed/Showdown.png" alt="Showdown">
                </div>
            </div>

            <div class="event-card card-locked">
                <div class="lock-icon">üîí</div>
                <h3 class="locked-title">Daily Events</h3>
                <div class="locked-desc">Reach <span class="highlight">150</span> total Trophies to unlock</div>
            </div>

            <div class="event-card card-locked">
                <div class="lock-icon">üîí</div>
                <h3 class="locked-title">Special Events</h3>
                <div class="locked-desc">Reach <span class="highlight">800</span> total Trophies to unlock</div>
            </div>
        </div>
    </div>

    <script src="https://cdn.socket.io/4.7.4/socket.io.min.js"></script>
    <script>
        // ============================
        // –ì–õ–û–ë–ê–õ–¨–ù–Ü –ó–ú–Ü–ù–ù–Ü
        // ============================
        let currentUsername = "TapGameplay";
        let socket = null;
        let isConnected = false;
        
        // ============================
        // –ï–ö–†–ê–ù –í–ò–ë–û–†–£ –ù–Ü–ö–ù–ï–ô–ú–ê
        // ============================
        document.addEventListener('DOMContentLoaded', function() {
            // –ï–ª–µ–º–µ–Ω—Ç–∏ –µ–∫—Ä–∞–Ω—É –Ω—ñ–∫–Ω–µ–π–º–∞
            const nicknameInput = document.getElementById('nickname-input');
            const startGameBtn = document.getElementById('start-game-btn');
            const randomNickBtn = document.getElementById('random-nickname-btn');
            
            // –°–ø–∏—Å–æ–∫ –≤–∏–ø–∞–¥–∫–æ–≤–∏—Ö –Ω—ñ–∫–Ω–µ–π–º—ñ–≤
            const randomNicknames = [
                "ProPlayer", "BrawlerX", "StarHunter", "GemMaster", "TrophyKing",
                "EliteWarrior", "ShadowNinja", "CosmicLord", "MegaShot", "UltraGamer",
                "BattleLord", "VictorySeeker", "ChampionX", "LegendPlayer", "MasterBrawler",
                "SupremeFighter", "EpicGamer", "MightyHero", "GoldenShot", "DiamondHand"
            ];
            
            // –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –≤–∏–ø–∞–¥–∫–æ–≤–æ–≥–æ –Ω—ñ–∫–Ω–µ–π–º–∞
            function generateRandomNickname() {
                const randomIndex = Math.floor(Math.random() * randomNicknames.length);
                const randomNumber = Math.floor(Math.random() * 999);
                return randomNicknames[randomIndex] + randomNumber;
            }
            
            // –ö–Ω–æ–ø–∫–∞ –≤–∏–ø–∞–¥–∫–æ–≤–æ–≥–æ –Ω—ñ–∫–Ω–µ–π–º–∞
            randomNickBtn.addEventListener('click', function() {
                nicknameInput.value = generateRandomNickname();
            });
            
            // –ö–Ω–æ–ø–∫–∞ –ø–æ—á–∞—Ç–∫—É –≥—Ä–∏
            startGameBtn.addEventListener('click', function() {
                const nickname = nicknameInput.value.trim();
                
                if (nickname.length < 3) {
                    alert("–ù—ñ–∫–Ω–µ–π–º –º–∞—î –±—É—Ç–∏ –Ω–µ –º–µ–Ω—à–µ 3 —Å–∏–º–≤–æ–ª—ñ–≤!");
                    nicknameInput.focus();
                    return;
                }
                
                if (nickname.length > 15) {
                    alert("–ù—ñ–∫–Ω–µ–π–º –º–∞—î –±—É—Ç–∏ –Ω–µ –±—ñ–ª—å—à–µ 15 —Å–∏–º–≤–æ–ª—ñ–≤!");
                    nicknameInput.focus();
                    return;
                }
                
                // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –Ω—ñ–∫–Ω–µ–π–º
                currentUsername = nickname;
                
                // –û–Ω–æ–≤–ª—é—î–º–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –Ω—ñ–∫–Ω–µ–π–º–∞
                document.getElementById('display-username').textContent = nickname;
                document.getElementById('avatar-text').textContent = nickname.substring(0, 2).toUpperCase();
                
                // –ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–æ –≥–æ–ª–æ–≤–Ω–æ–≥–æ –µ–∫—Ä–∞–Ω—É
                showScreen('home-screen');
                
                // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ –∑'—î–¥–Ω–∞–Ω–Ω—è –∑ —Å–µ—Ä–≤–µ—Ä–æ–º
                setTimeout(initializeSocketConnection, 500);
                
                // –ü–æ–∫–∞–∑—É—î–º–æ –ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è –≤ —á–∞—Ç—ñ
                setTimeout(() => {
                    addChatMessage('SYSTEM', `üëã –í—ñ—Ç–∞—î–º–æ, ${nickname}! –õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –¥–æ Brawl Stars 2018!`, true);
                    addChatMessage('SYSTEM', 'üí¨ –ß–∞—Ç –∞–∫—Ç–∏–≤–Ω–∏–π. –°–ø—ñ–ª–∫—É–π—Ç–µ—Å—å –∑ —ñ–Ω—à–∏–º–∏ –≥—Ä–∞–≤—Ü—è–º–∏!', true);
                    
                    // –•–æ–≤–∞—î–º–æ –º–æ–±—ñ–ª—å–Ω–µ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥–∏
                    setTimeout(() => {
                        const mobileNotification = document.getElementById('mobile-notification');
                        if (mobileNotification) {
                            mobileNotification.style.display = 'none';
                        }
                    }, 3000);
                }, 1000);
            });
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —Ñ–æ–∫—É—Å –Ω–∞ –ø–æ–ª—ñ –≤–≤–æ–¥—É
            nicknameInput.focus();
            
            // –û–±—Ä–æ–±–∫–∞ Enter –≤ –ø–æ–ª—ñ –≤–≤–æ–¥—É
            nicknameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    startGameBtn.click();
                }
            });
            
            // –ì–µ–Ω–µ—Ä—É—î–º–æ –≤–∏–ø–∞–¥–∫–æ–≤–∏–π –Ω—ñ–∫ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ
            nicknameInput.value = generateRandomNickname();
        });
        
        // ============================
        // –û–°–ù–û–í–ù–Ü –§–£–ù–ö–¶–Ü–á –Ü–ù–¢–ï–†–§–ï–ô–°–£
        // ============================
        function showScreen(screenId) {
            document.querySelectorAll('.screen-container').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        function toggleChat() {
            const chatWindow = document.getElementById('chat-window');
            chatWindow.classList.toggle('active');
            
            // –ê–≤—Ç–æ-—Ñ–æ–∫—É—Å –Ω–∞ –ø–æ–ª–µ –≤–≤–æ–¥—É –ø—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ —á–∞—Ç—É
            if (chatWindow.classList.contains('active')) {
                setTimeout(() => {
                    document.getElementById('chat-input').focus();
                }, 100);
            }
        }

        function toggleSocialPanel() {
            document.getElementById('social-panel').classList.toggle('active');
        }

        // ============================
        // –§–£–ù–ö–¶–Ü–á –ß–ê–¢–£
        // ============================
        const chatOutput = document.getElementById('chat-messages'); 
        const playerListOutput = document.getElementById('player-list');
        const chatInput = document.getElementById('chat-input');
        
        function addChatMessage(user, text, isSystem = false) {
            const messageElement = document.createElement('div');
            if (isSystem) {
                messageElement.innerHTML = `<strong style="color:var(--gold);">[${user}]:</strong> ${text}`;
            } else {
                messageElement.innerHTML = `[${user}]: ${text}`;
            }
            chatOutput.appendChild(messageElement);
            chatOutput.scrollTop = chatOutput.scrollHeight;
        }

        function sendChatMessage() {
            const text = chatInput.value.trim();
            if (text === '') return;
            
            if (!isConnected) {
                addChatMessage(currentUsername, text);
                addChatMessage('SYSTEM', '‚ö†Ô∏è –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ (–Ω–µ–º–∞—î –∑\'—î–¥–Ω–∞–Ω–Ω—è)', true);
            } else {
                socket.emit('sendMessage', text);
                addChatMessage(currentUsername, text);
            }
            
            chatInput.value = '';
            chatInput.focus();
        }

        // ============================
        // SOCKET.IO –ü–Ü–î–ö–õ–Æ–ß–ï–ù–ù–Ø
        // ============================
        function initializeSocketConnection() {
            console.log('üîÑ –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞...');
            addChatMessage('SYSTEM', 'üîÑ –°–ø—Ä–æ–±–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –º—É–ª—å—Ç–∏–ø–ª–µ—î—Ä —Å–µ—Ä–≤–µ—Ä–∞...', true);
            
            const SERVER_URL = 'https://e1880d92-f3a7-4ff5-b154-3e018a98f04c-00-obyt5ltn3xal.kirk.replit.dev';
            
            try {
                socket = io(SERVER_URL, {
                    transports: ['websocket', 'polling'],
                    reconnection: true,
                    reconnectionAttempts: 5,
                    reconnectionDelay: 2000,
                    timeout: 10000,
                    forceNew: false,
                    withCredentials: false
                });
                
                // –û–±—Ä–æ–±–Ω–∏–∫–∏ –ø–æ–¥—ñ–π Socket.IO
                socket.on('connect', () => {
                    console.log('‚úÖ –ü–Ü–î–ö–õ–Æ–ß–ï–ù–û –î–û –°–ï–†–í–ï–†–ê!');
                    isConnected = true;
                    addChatMessage('SYSTEM', '‚úÖ –£—Å–ø—ñ—à–Ω–æ –ø—ñ–¥–∫–ª—é—á–µ–Ω–æ –¥–æ —Å–µ—Ä–≤–µ—Ä–∞!', true);
                    
                    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –ª–æ–≥—ñ–Ω
                    setTimeout(() => {
                        socket.emit('login', currentUsername);
                    }, 1000);
                });
                
                socket.on('connect_error', (error) => {
                    console.error('‚ùå –ü–û–ú–ò–õ–ö–ê –ü–Ü–î–ö–õ–Æ–ß–ï–ù–ù–Ø:', error.message);
                    isConnected = false;
                    addChatMessage('SYSTEM', '‚ùå –ù–µ –≤–¥–∞–ª–æ—Å—è –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞', true);
                    addChatMessage('SYSTEM', 'üì¥ –ì—Ä–∞ –ø—Ä–∞—Ü—é—î –≤ –æ—Ñ–ª–∞–π–Ω-—Ä–µ–∂–∏–º—ñ', true);
                    simulateOfflineMode();
                });
                
                socket.on('loginSuccess', (username) => {
                    console.log('‚úÖ –£–°–ü–Ü–®–ù–ò–ô –í–•–Ü–î:', username);
                    currentUsername = username;
                    document.getElementById('display-username').textContent = username;
                    document.getElementById('avatar-text').textContent = username.substring(0, 2).toUpperCase();
                    addChatMessage('SYSTEM', `‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è —É—Å–ø—ñ—à–Ω–∞! –í—ñ—Ç–∞—î–º–æ, ${username}!`, true);
                });
                
                socket.on('chatMessage', (data) => {
                    addChatMessage(data.user, data.text);
                });
                
                socket.on('updatePlayerList', (players) => {
                    updateOnlinePlayers(players);
                });
                
                socket.on('receiveInvite', (data) => {
                    handleGameInvite(data);
                });
                
            } catch (error) {
                console.error('‚ùå –ü–û–ú–ò–õ–ö–ê –Ü–ù–Ü–¶–Ü–ê–õ–Ü–ó–ê–¶–Ü–á:', error);
                addChatMessage('SYSTEM', '‚ùå –ü–æ–º–∏–ª–∫–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –º–µ—Ä–µ–∂—ñ', true);
                simulateOfflineMode();
            }
        }
        
        // ============================
        // –î–û–î–ê–¢–ö–û–í–Ü –§–£–ù–ö–¶–Ü–á
        // ============================
        function updateOnlinePlayers(players) {
            playerListOutput.innerHTML = '';
            
            if (!players || players.length === 0) {
                playerListOutput.innerHTML = '<li>üë§ –ù–µ–º–∞—î —ñ–Ω—à–∏—Ö –≥—Ä–∞–≤—Ü—ñ–≤ –æ–Ω–ª–∞–π–Ω</li>';
                return;
            }
            
            const otherPlayers = players.filter(player => player !== currentUsername);
            
            if (otherPlayers.length === 0) {
                playerListOutput.innerHTML = '<li>üë§ –í–∏ –æ–¥–∏–Ω —É –≥—Ä—ñ</li>';
                return;
            }
            
            otherPlayers.forEach(player => {
                const li = document.createElement('li');
                li.innerHTML = `
                    <span style="display: flex; align-items: center; gap: 8px;">
                        <div style="width: 20px; height: 20px; border-radius: 50%; background: linear-gradient(45deg, #3498db, #9b59b6); display: flex; align-items: center; justify-content: center; font-size: 10px;">
                            ${player.substring(0, 2).toUpperCase()}
                        </div>
                        ${player}
                    </span>
                    <button onclick="sendGameInvite('${player}')">–ó–∞–ø—Ä–æ—Å–∏—Ç–∏</button>
                `;
                playerListOutput.appendChild(li);
            });
        }
        
        function sendGameInvite(targetPlayer) {
            if (!isConnected) {
                addChatMessage('SYSTEM', `‚ùå –ù–µ –º–æ–∂—É –∑–∞–ø—Ä–æ—Å–∏—Ç–∏ ${targetPlayer} (–æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º)`, true);
                return;
            }
            socket.emit('sendInvite', targetPlayer);
            addChatMessage('SYSTEM', `üì® –ó–∞–ø—Ä–æ—à–µ–Ω–Ω—è –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ –≥—Ä–∞–≤—Ü—é ${targetPlayer}`, true);
        }
        
        function handleGameInvite(data) {
            const accept = confirm(`üéÆ ${data.senderName} –∑–∞–ø—Ä–æ—à—É—î –≤–∞—Å —É –≥—Ä—É!\n\n–ü—Ä–∏–π–Ω—è—Ç–∏ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—è?`);
            if (accept) {
                addChatMessage('SYSTEM', `‚úÖ –í–∏ –ø—Ä–∏–π–Ω—è–ª–∏ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—è –≤—ñ–¥ ${data.senderName}!`, true);
                if (isConnected && socket) {
                    socket.emit('acceptInvite', data.senderId);
                }
            } else {
                addChatMessage('SYSTEM', `‚ùå –í–∏ –≤—ñ–¥—Ö–∏–ª–∏–ª–∏ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—è –≤—ñ–¥ ${data.senderName}`, true);
            }
        }
        
        function simulateOfflineMode() {
            // –°–∏–º—É–ª—è—Ü—ñ—è –≥—Ä–∞–≤—Ü—ñ–≤ –¥–ª—è –æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º—É
            const fakePlayers = ['Player_Alpha', 'Player_Beta', 'Player_Gamma', 'BOT_1', 'BOT_2'];
            updateOnlinePlayers(fakePlayers);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤—ñ–¥ –±–æ—Ç—ñ–≤
            setInterval(() => {
                if (Math.random() > 0.7) {
                    const randomPlayer = fakePlayers[Math.floor(Math.random() * fakePlayers.length)];
                    const messages = [
                        '–•—Ç–æ —Ö–æ—á–µ –∑—ñ–≥—Ä–∞—Ç–∏?',
                        '–ü—Ä–∏–≤—ñ—Ç —É—Å—ñ–º!',
                        '–ö–ª–∞—Å–Ω–∞ –≥—Ä–∞!',
                        '–î–∞–≤–∞–π—Ç–µ –≥—Ä–∞—Ç–∏ —Ä–∞–∑–æ–º!',
                        '–Ø –Ω–æ–≤–∏–π –≥—Ä–∞–≤–µ—Ü—å —Ç—É—Ç'
                    ];
                    const randomMessage = messages[Math.floor(Math.random() * messages.length)];
                    addChatMessage(randomPlayer, randomMessage);
                }
            }, 15000);
        }
        
        // ============================
        // –û–ë–†–û–ë–ö–ê –ü–û–î–Ü–ô –ì–†–ò
        // ============================
        document.addEventListener('DOMContentLoaded', function() {
            // –ö–Ω–æ–ø–∫–∞ Play
            const playButton = document.querySelector('.btn-play');
            if (playButton) {
                playButton.addEventListener('click', function() {
                    this.style.transform = 'translateY(4px)';
                    this.style.boxShadow = '0 2px 0 #cca300';
                    
                    setTimeout(() => {
                        this.style.transform = '';
                        this.style.boxShadow = '0 6px 0 #cca300';
                        
                        if (!isConnected) {
                            addChatMessage('SYSTEM', '‚ö†Ô∏è –î–ª—è –æ–Ω–ª–∞–π–Ω –≥—Ä–∏ –ø–æ—Ç—Ä—ñ–±–Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è', true);
                        } else {
                            addChatMessage('SYSTEM', 'üéÆ –ü–æ—à—É–∫ –ø—Ä–æ—Ç–∏–≤–Ω–∏–∫—ñ–≤...', true);
                            
                            // –°–∏–º—É–ª—è—Ü—ñ—è –ø–æ—à—É–∫—É –≥—Ä–∏
                            const originalText = this.textContent;
                            this.textContent = 'SEARCHING...';
                            this.disabled = true;
                            
                            setTimeout(() => {
                                this.textContent = originalText;
                                this.disabled = false;
                                addChatMessage('SYSTEM', '‚ùå –ü—Ä–æ—Ç–∏–≤–Ω–∏–∫—ñ–≤ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ. –°–ø—Ä–æ–±—É–π—Ç–µ –ø—ñ–∑–Ω—ñ—à–µ.', true);
                            }, 3000);
                        }
                    }, 100);
                });
            }
            
            // –û–±—Ä–æ–±–∫–∞ Enter –≤ —á–∞—Ç—ñ
            chatInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendChatMessage();
                }
            });
            
            // –ê–Ω—ñ–º–∞—Ü—ñ—è –∞–≤–∞—Ç–∞—Ä–∞
            const avatar = document.querySelector('.avatar');
            if (avatar) {
                setInterval(() => {
                    avatar.style.transform = 'scale(1.1)';
                    setTimeout(() => {
                        avatar.style.transform = 'scale(1)';
                    }, 300);
                }, 5000);
            }
            
            // –ê–¥–∞–ø—Ç–∞—Ü—ñ—è –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö
            if (window.innerWidth <= 768) {
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ —á–∞—Ç –Ω–∞ –º–æ–±—ñ–ª—å–Ω–∏—Ö
                setTimeout(() => {
                    toggleChat();
                }, 2000);
                
                // –•–æ–≤–∞—î–º–æ –º–æ–±—ñ–ª—å–Ω–µ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
                setTimeout(() => {
                    const notification = document.getElementById('mobile-notification');
                    if (notification) {
                        notification.style.display = 'none';
                    }
                }, 5000);
            }
        });
        
        // –ï–∫—Å–ø–æ—Ä—Ç —Ñ—É–Ω–∫—Ü—ñ–π –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
        window.showScreen = showScreen;
        window.toggleChat = toggleChat;
        window.toggleSocialPanel = toggleSocialPanel;
        window.sendChatMessage = sendChatMessage;
        window.sendGameInvite = sendGameInvite;
        
        console.log('üéÆ Brawl Stars 2018 –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ! –í–µ—Ä—Å—ñ—è: Mobile Ready');
    </script>
</body>
</html>